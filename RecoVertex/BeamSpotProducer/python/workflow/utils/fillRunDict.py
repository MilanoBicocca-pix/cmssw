'''
Dictionary to connect the number of (stable) LHC Fill to
the CMS run numbers.
For now this is periodically done by hand.
Could be made smarter at some point.

A handy re-labeling function is also provided.
'''

fillRunDict = {
  # 20 July 2015
  4020: [252126],
  4019: [252116],
  4008: [251883],
  4006: [251864],
  4001: [251781],
  3996: [251717, 251718, 251721],
  3992: [251636, 251638, 251640, 251642, 251643],
  3988: [251559, 251560, 251561, 251562],
  3986: [251548],
  3983: [251521, 251522, 251523],
  3981: [251491, 251493, 251496, 251497, 251498, 251499, 251500],
  3976: [251244, 251249, 251250, 251251, 251252],
  3971: [251022, 251023, 251024, 251025, 251026, 251027, 251028],
  3965: [250930, 250931, 250932],
  3962: [250885, 250886, 250889, 250890, 250891, 250892, 250893, 250895, 250896, 250897, 250898, 250899, 250901, 250902],
  3960: [250862, 250863, 250864, 250865, 250866, 250867, 250868, 250869, 250871],
  3858: [248025, 248026, 248027, 248028, 248029, 248030, 248031, 248032, 248033, 248035, 248036, 248037, 248038],
  3857: [247981, 247982, 247983, 247987, 247989, 247990, 247991, 247992, 247994, 247996, 247998, 248000, 248002, 248003, 248004, 248005, 248006, 248007, 248009],
  3855: [247910, 247911, 247912, 247913, 247914, 247915, 247917, 247919, 247920, 247921, 247923, 247924, 247926, 247927, 247928, 247931, 247933, 247934],
  3851: [247702, 247703, 247704, 247705, 247707, 247708, 247710, 247711, 247716, 247718, 247719, 247720],
  3850: [247685],
  3848: [247642, 247644, 247646, 247647, 247648],
  3847: [247623],
  3846: [247607, 247609, 247610, 247611, 247612],
  3835: [247377, 247379, 247380, 247381, 247382, 247383, 247384, 247385, 247386, 247387, 247388, 247389, 247394, 247395, 247397, 247398],
  3833: [247302, 247303, 247305, 247306, 247307, 247309, 247310, 247313, 247317, 247318, 247319, 247320, 247323, 247324, 247326, 247328, 247333, 247334, 247335, 247336],
  3829: [247231, 247232, 247233, 247234, 247235, 247236, 247237, 247238, 247240, 247241, 247243, 247244, 247245, 247246, 247247, 247248, 247250, 247251, 247252, 247253, 247255, 247256, 247259, 247261, 247262, 247263, 247265, 247266, 247267],
  3824: [247068, 247069, 247070, 247073, 247076, 247077, 247078, 247079, 247081],
  3820: [246951, 246953, 246954, 246956, 246957, 246958, 246959, 246960, 246961, 246962, 246963],
  3819: [246908, 246912, 246913, 246914, 246919, 246920, 246923, 246926, 246930, 246933, 246934, 246936],
}

def labelByFill(histo):
  '''
  Takes a TH1.
  Relabels the x-axis so that the Fill number appears.
  '''
  for ibin in range(histo.GetNbinsX()):
	irun = histo.GetXaxis().GetBinLabel(ibin+1)
	if irun == '':  
	  continue
	for k, v in fillRunDict.items():
	  if int(irun) in v: 
		theifill = k
		break
	histo.GetXaxis().SetBinLabel(ibin+1, str(theifill))
  
  previousLabel = histo.GetXaxis().GetBinLabel(1)  
  for ibin in range(1, histo.GetNbinsX()):
	if histo.GetXaxis().GetBinLabel(ibin+1) == '':  continue
	if histo.GetXaxis().GetBinLabel(ibin+1) == previousLabel:
	  histo.GetXaxis().SetBinLabel(ibin+1, '')
	else:
	  previousLabel = histo.GetXaxis().GetBinLabel(ibin+1)


